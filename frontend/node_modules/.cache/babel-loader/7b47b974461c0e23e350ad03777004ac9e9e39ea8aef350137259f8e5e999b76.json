{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import'./AdminDashboard.css';import AddGreaseProductForm from'./AddGreaseProductForm';import UpdateGreaseProductForm from'./UpdateGreaseProductForm';import DeleteGreaseProductForm from'./DeleteGreaseProductForm';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function AdminDashboard(){const[enquiries,setEnquiries]=useState([]);const[greaseProducts,setGreaseProducts]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState('');const[selectedProduct,setSelectedProduct]=useState(null);const[isAddingProduct,setIsAddingProduct]=useState(false);const navigate=useNavigate();useEffect(()=>{const fetchEnquiries=async()=>{try{const response=await fetch('http://localhost:5000/api/contact');const data=await response.json();if(response.ok){setEnquiries(data);setLoading(false);}else{throw new Error(data.message||'Failed to fetch enquiries');}}catch(err){setError(err.message);setLoading(false);}};const fetchGreaseProducts=async()=>{try{const response=await fetch('http://localhost:5000/api/grease');const data=await response.json();if(response.ok){setGreaseProducts(data);setLoading(false);}else{throw new Error(data.message||'Failed to fetch grease products');}}catch(err){setError(err.message);setLoading(false);}};fetchEnquiries();fetchGreaseProducts();},[]);const handleLogout=()=>{localStorage.clear();sessionStorage.clear();navigate('/');};const handleAddProduct=()=>{setIsAddingProduct(true);};const handleDeleteProduct=()=>{setSelectedProduct(null);// Optionally refresh products after delete\n};const handleUpdateProduct=()=>{setSelectedProduct(null);// Optionally refresh products after update\n};return/*#__PURE__*/_jsxs(\"div\",{className:\"admin-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Admin Dashboard\"}),/*#__PURE__*/_jsx(\"button\",{className:\"logout-button\",onClick:handleLogout,children:\"Logout\"})]}),loading&&/*#__PURE__*/_jsx(\"p\",{children:\"Loading...\"}),error&&/*#__PURE__*/_jsx(\"p\",{style:{color:'red'},children:error}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Grease Products\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleAddProduct,children:\"Add New Grease Product\"}),isAddingProduct&&/*#__PURE__*/_jsx(AddGreaseProductForm,{onAddProduct:()=>setIsAddingProduct(false)}),selectedProduct&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(UpdateGreaseProductForm,{productId:selectedProduct,onUpdateProduct:handleUpdateProduct}),/*#__PURE__*/_jsx(DeleteGreaseProductForm,{productId:selectedProduct,onDeleteProduct:handleDeleteProduct})]}),greaseProducts.length===0?/*#__PURE__*/_jsx(\"p\",{children:\"No grease products found.\"}):/*#__PURE__*/_jsx(\"ul\",{className:\"product-list\",children:greaseProducts.map(product=>/*#__PURE__*/_jsxs(\"li\",{className:\"product-card\",onClick:()=>setSelectedProduct(product._id),children:[/*#__PURE__*/_jsx(\"h4\",{children:product.name}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Price: $\",product.price]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Stock: \",product.stock]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Category: \",product.category]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Offer: \",product.offer?'Yes':'No']}),/*#__PURE__*/_jsx(\"img\",{src:product.image,alt:product.name,width:\"100\"}),/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(\"i\",{children:\"Click card to update/delete\"})})]},product._id))})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Customer Enquiries\"}),enquiries.length===0?/*#__PURE__*/_jsx(\"p\",{children:\"No enquiries found.\"}):/*#__PURE__*/_jsx(\"ul\",{className:\"enquiry-list\",children:enquiries.map((enquiry,index)=>/*#__PURE__*/_jsxs(\"li\",{className:\"enquiry-card\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Name:\"}),\" \",enquiry.name]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Email:\"}),\" \",enquiry.email]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Message:\"}),\" \",enquiry.message]})]},index))})]})]});}export default AdminDashboard;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","AddGreaseProductForm","UpdateGreaseProductForm","DeleteGreaseProductForm","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","AdminDashboard","enquiries","setEnquiries","greaseProducts","setGreaseProducts","loading","setLoading","error","setError","selectedProduct","setSelectedProduct","isAddingProduct","setIsAddingProduct","navigate","fetchEnquiries","response","fetch","data","json","ok","Error","message","err","fetchGreaseProducts","handleLogout","localStorage","clear","sessionStorage","handleAddProduct","handleDeleteProduct","handleUpdateProduct","className","children","onClick","style","color","onAddProduct","productId","onUpdateProduct","onDeleteProduct","length","map","product","_id","name","price","stock","category","offer","src","image","alt","width","enquiry","index","email"],"sources":["C:/Users/Acer/Desktop/SE_REVIEW/SE_Group4/frontend/src/pages/AdminDashboard.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport './AdminDashboard.css';\r\nimport AddGreaseProductForm from './AddGreaseProductForm';\r\nimport UpdateGreaseProductForm from './UpdateGreaseProductForm';\r\nimport DeleteGreaseProductForm from './DeleteGreaseProductForm';\r\n\r\nfunction AdminDashboard() {\r\n    const [enquiries, setEnquiries] = useState([]);\r\n    const [greaseProducts, setGreaseProducts] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [error, setError] = useState('');\r\n    const [selectedProduct, setSelectedProduct] = useState(null);\r\n    const [isAddingProduct, setIsAddingProduct] = useState(false);\r\n\r\n    const navigate = useNavigate();\r\n\r\n    useEffect(() => {\r\n        const fetchEnquiries = async () => {\r\n            try {\r\n                const response = await fetch('http://localhost:5000/api/contact');\r\n                const data = await response.json();\r\n                if (response.ok) {\r\n                    setEnquiries(data);\r\n                    setLoading(false);\r\n                } else {\r\n                    throw new Error(data.message || 'Failed to fetch enquiries');\r\n                }\r\n            } catch (err) {\r\n                setError(err.message);\r\n                setLoading(false);\r\n            }\r\n        };\r\n\r\n        const fetchGreaseProducts = async () => {\r\n            try {\r\n                const response = await fetch('http://localhost:5000/api/grease');\r\n                const data = await response.json();\r\n                if (response.ok) {\r\n                    setGreaseProducts(data);\r\n                    setLoading(false);\r\n                } else {\r\n                    throw new Error(data.message || 'Failed to fetch grease products');\r\n                }\r\n            } catch (err) {\r\n                setError(err.message);\r\n                setLoading(false);\r\n            }\r\n        };\r\n\r\n        fetchEnquiries();\r\n        fetchGreaseProducts();\r\n    }, []);\r\n\r\n    const handleLogout = () => {\r\n        localStorage.clear();\r\n        sessionStorage.clear();\r\n        navigate('/');\r\n    };\r\n\r\n    const handleAddProduct = () => {\r\n        setIsAddingProduct(true);\r\n    };\r\n\r\n    const handleDeleteProduct = () => {\r\n        setSelectedProduct(null);\r\n        // Optionally refresh products after delete\r\n    };\r\n\r\n    const handleUpdateProduct = () => {\r\n        setSelectedProduct(null);\r\n        // Optionally refresh products after update\r\n    };\r\n\r\n    return (\r\n        <div className=\"admin-container\">\r\n            <div className=\"dashboard-header\">\r\n                <h2>Admin Dashboard</h2>\r\n                <button className=\"logout-button\" onClick={handleLogout}>Logout</button>\r\n            </div>\r\n\r\n            {loading && <p>Loading...</p>}\r\n            {error && <p style={{ color: 'red' }}>{error}</p>}\r\n\r\n            <div>\r\n                <h3>Grease Products</h3>\r\n                <button onClick={handleAddProduct}>Add New Grease Product</button>\r\n                {isAddingProduct && <AddGreaseProductForm onAddProduct={() => setIsAddingProduct(false)} />}\r\n\r\n                {/* Conditionally render update & delete forms if a product is selected */}\r\n                {selectedProduct && (\r\n                    <>\r\n                        <UpdateGreaseProductForm\r\n                            productId={selectedProduct}\r\n                            onUpdateProduct={handleUpdateProduct}\r\n                        />\r\n                        <DeleteGreaseProductForm\r\n                            productId={selectedProduct}\r\n                            onDeleteProduct={handleDeleteProduct}\r\n                        />\r\n                    </>\r\n                )}\r\n\r\n                {greaseProducts.length === 0 ? (\r\n                    <p>No grease products found.</p>\r\n                ) : (\r\n                    <ul className=\"product-list\">\r\n                        {greaseProducts.map((product) => (\r\n                            <li\r\n                                key={product._id}\r\n                                className=\"product-card\"\r\n                                onClick={() => setSelectedProduct(product._id)}\r\n                            >\r\n                                <h4>{product.name}</h4>\r\n                                <p>Price: ${product.price}</p>\r\n                                <p>Stock: {product.stock}</p>\r\n                                <p>Category: {product.category}</p>\r\n                                <p>Offer: {product.offer ? 'Yes' : 'No'}</p>\r\n                                <img src={product.image} alt={product.name} width=\"100\" />\r\n                                <p><i>Click card to update/delete</i></p>\r\n                            </li>\r\n                        ))}\r\n                    </ul>\r\n                )}\r\n            </div>\r\n\r\n            <div>\r\n                <h3>Customer Enquiries</h3>\r\n                {enquiries.length === 0 ? (\r\n                    <p>No enquiries found.</p>\r\n                ) : (\r\n                    <ul className=\"enquiry-list\">\r\n                        {enquiries.map((enquiry, index) => (\r\n                            <li key={index} className=\"enquiry-card\">\r\n                                <p><strong>Name:</strong> {enquiry.name}</p>\r\n                                <p><strong>Email:</strong> {enquiry.email}</p>\r\n                                <p><strong>Message:</strong> {enquiry.message}</p>\r\n                            </li>\r\n                        ))}\r\n                    </ul>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default AdminDashboard;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}